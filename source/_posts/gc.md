---
title: "Js 垃圾回收机制笔记"
date: "2019-04-30 18:58:00"
categories: 前端
tags:
- 原理与基础
photos:
- https://image-cdn.hahhub.com/images/2019/07/09/bc224bdea9a58a5dbf81e50cb7c9091e.png
---

## 介绍

最近阅读了文章[前端面试查漏补缺--(二) 垃圾回收机制](https://juejin.im/post/5c6bba32f265da2db07382cf)，发现了对这方便知识细节的欠缺，所以找了一些资料学习一番，记性不是很好所以记下一些笔记。

## 笔记

### 内存生命周期

> 1. 内存分配：当我们申明变量、函数、对象,并执行的时候，系统会自动为他们分配内存
> 1. 内存使用：即读写内存，也就是使用变量、函数等
> 2. 内存回收：使用完毕，由垃圾回收机制自动回收不再使用的内存


### 垃圾回收机制策略

#### 引用计数垃圾收集

> 这是最初级的垃圾收集算法。此算法把“对象是否不再需要”简化定义为“对象有没有其他对象引用到它”。如果没有引用指向该对象（零引用），对象将被垃圾回收机制回收。

限制：循环引用


#### 标记清除算法

> 这个算法把“对象是否不再需要”简化定义为“对象是否可以获得”。

限制: 那些无法从根对象查询到的对象都将被清除


#### Chrome V8 分代回收（Generation GC）

> 通过区分「临时」与「持久」对象；多回收「临时对象区」（新生代younggeneration），少回收「持久对象区」（老生代 tenured generation），减少每次需遍历的对象，从而减少每次GC的耗时。

V8的内存限制：

* 64 位系统下约为 1.4GB
* 32 位系统下约为 0.7GB（node 中）。

对应到分代内存中，默认情况下。

* 32位系统新生代内存大小为16MB，老生代内存大小为700MB。
* 64位系统下，新生代内存大小为32MB，老生代内存大小为1.4GB。

### 参考

* [内存管理 - MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management)
* [V8 内存管理和垃圾回收机制总结](https://www.jianshu.com/p/455d0b9ef0a8)
* [V8 之旅： 垃圾回收器](http://newhtml.net/v8-garbage-collection/)
* [V8 内存浅析](https://zhuanlan.zhihu.com/p/33816534)